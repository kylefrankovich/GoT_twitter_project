library(plotly)
library(dplyr)
library(ggplotly)
installed.packages('ggplotly')
library(ggplotly)
blah = c(0,1,0,1,0)
mean(blah)
blah = c(0,1,0,1)
mean(blah)
blah = c(0,1,0,1,NaN)
mean(blah)
mean(blah, na.rm=TRUE) # returns 2
blah
blah = c(0,1,0,1,NaN,0,0,0,NaN)
mean(blah, na.rm=TRUE) # returns 2
2/7
blah = c(0,1,0,1,99,0,0,0,99)
mean(blah)
blah[blah==99]=NaN
blah
mean(blah)
mean(blah, na.rm=TRUE)
library(ggplot2)
library(plotly)
library(tidyr)
library(dplyr)
setwd('/Users/kfranko/Box Sync/GoT_data/data/episode_1')
data_file_ep1_24 = 'kyle_GoT_ep1_search_name_counts2016_05_03-17_00_50.csv'
data_file_ep1_next_24 = 'kyle_GoT_ep1_search_next_24_hrs_name_counts2016_05_03-17_04_09.csv'
df_ep1_24 <- read.csv(data_file_ep1_24, header = TRUE)
df_ep1_next_24 <- read.csv(data_file_ep1_next_24, header = TRUE)
# episode 2:
setwd('/Users/kfranko/Box Sync/GoT_data/data/episode_2')
data_file_ep2_48 = 'kyle_GoT_ep2_search_48_hrs_name_counts2016_05_06-10_53_13.csv'
df_ep2_48 <- read.csv(data_file_ep2_48, header = TRUE)
# episode 3:
setwd('/Users/kfranko/Box Sync/GoT_data/data/episode_3')
data_file_ep3_48 = 'kyle_GoT_ep3_search_48_hrs_name_counts2016_05_18-16_40_16.csv'
df_ep3_48 <- read.csv(data_file_ep3_48, header = TRUE)
# episode 4:
setwd('/Users/kfranko/Box Sync/GoT_data/data/episode_4')
data_file_ep4_48 = 'kyle_GoT_ep4_search_48_hrs_name_counts2016_05_18-16_45_34.csv'
df_ep4_48 <- read.csv(data_file_ep4_48, header = TRUE)
View(df_ep2_48)
View(df_ep3_48)
long_df_ep1_24 = tidyr::gather(df_ep1_24,names,count,nymeria:bran)
long_df_ep1_next_24 = tidyr::gather(df_ep1_next_24,names,count,nymeria:bran)
long_df_ep1_48_hrs = long_df_ep1_24
long_df_ep1_48_hrs$count_day_2 = long_df_ep1_next_24$count
long_df_ep1_48_hrs$count = long_df_ep1_24$count + long_df_ep1_next_24$count
total_mentions_ep1_48_hrs = sum(long_df_ep1_48_hrs$count)
# ep2:
long_df_ep2_48_hrs = tidyr::gather(df_ep2_48,names,count,nymeria:bran)
total_mentions_ep2_48_hrs = sum(long_df_ep2_48_hrs$count)
# ep3:
long_df_ep3_48_hrs = tidyr::gather(df_ep3_48,names,count,nymeria:bran)
total_mentions_ep3_48_hrs = sum(long_df_ep3_48_hrs$count)
# ep4:
long_df_ep4_48_hrs = tidyr::gather(df_ep4_48,names,count,nymeria:bran)
total_mentions_ep4_48_hrs = sum(long_df_ep4_48_hrs$count)
long_df_ep1_48_hrs$count_percent = (long_df_ep1_48_hrs$count/total_mentions_ep1_48_hrs)*100
long_df_ep2_48_hrs$count_percent = (long_df_ep2_48_hrs$count/total_mentions_ep2_48_hrs)*100
long_df_ep3_48_hrs$count_percent = (long_df_ep3_48_hrs$count/total_mentions_ep3_48_hrs)*100
long_df_ep4_48_hrs$count_percent = (long_df_ep4_48_hrs$count/total_mentions_ep4_48_hrs)*100
View(long_df_ep1_48_hrs)
View(long_df_ep2_48_hrs)
View(long_df_ep3_48_hrs)
View(long_df_ep4_48_hrs)
View(df_ep2_48)
View(df_ep3_48)
View(df_ep4_48)
long_df_ep3_48_hrs = tidyr::gather(df_ep3_48,names,count,nymeria:myrcella)
total_mentions_ep3_48_hrs = sum(long_df_ep3_48_hrs$count)
# ep4:
long_df_ep4_48_hrs = tidyr::gather(df_ep4_48,names,count,nymeria:myrcella)
total_mentions_ep4_48_hrs = sum(long_df_ep4_48_hrs$count)
long_df_ep1_48_hrs$count_percent = (long_df_ep1_48_hrs$count/total_mentions_ep1_48_hrs)*100
long_df_ep2_48_hrs$count_percent = (long_df_ep2_48_hrs$count/total_mentions_ep2_48_hrs)*100
long_df_ep3_48_hrs$count_percent = (long_df_ep3_48_hrs$count/total_mentions_ep3_48_hrs)*100
long_df_ep4_48_hrs$count_percent = (long_df_ep4_48_hrs$count/total_mentions_ep4_48_hrs)*100
View(long_df_ep1_48_hrs)
View(long_df_ep2_48_hrs)
View(long_df_ep3_48_hrs)
View(long_df_ep4_48_hrs)
View(long_df_ep2_48_hrs)
setwd('/Users/kfranko/Box Sync/GoT_data/data/')
char_names_file = 'character_names_library.csv'
char_names_library = read.csv(char_names_file, header = TRUE)
View(char_names_library)
View(long_df_ep1_48_hrs)
View(long_df_ep2_48_hrs)
View(long_df_ep1_24)
head(long_df_ep1_48_hrs)
head(long_df_ep2_48_hrs)
# episode 1:
setwd('/Users/kfranko/Box Sync/GoT_data/data/episode_1')
data_file_ep1_24 = 'kyle_GoT_ep1_search_name_counts2016_05_18-17_23_18.csv'
data_file_ep1_next_24 = 'kyle_GoT_ep1_search_next_24_hrs_name_counts2016_05_18-17_26_35.csv'
df_ep1_24 <- read.csv(data_file_ep1_24, header = TRUE)
df_ep1_next_24 <- read.csv(data_file_ep1_next_24, header = TRUE)
# ep1 (needs to combine two data sets to give us 48 hours worth of tweets):
long_df_ep1_24 = tidyr::gather(df_ep1_24,names,count,nymeria:bran)
long_df_ep1_next_24 = tidyr::gather(df_ep1_next_24,names,count,nymeria:bran)
long_df_ep1_48_hrs = long_df_ep1_24
long_df_ep1_48_hrs$count_day_2 = long_df_ep1_next_24$count
long_df_ep1_48_hrs$count = long_df_ep1_24$count + long_df_ep1_next_24$count
total_mentions_ep1_48_hrs = sum(long_df_ep1_48_hrs$count)
View(long_df_ep1_48_hrs)
View(long_df_ep2_48_hrs)
View(long_df_ep1_48_hrs)
View(long_df_ep1_24)
View(df_ep1_24)
View(long_df_ep1_24)
View(df_ep1_24)
long_df_ep1_24 = tidyr::gather(df_ep1_24,names,count,nymeria:myrcella)
long_df_ep1_next_24 = tidyr::gather(df_ep1_next_24,names,count,nymeria:myrcella)
View(long_df_ep1_24)
View(long_df_ep1_next_24)
long_df_ep1_48_hrs = long_df_ep1_24$names
long_df_ep1_48_hrs = long_df_ep1_24
View(long_df_ep1_48_hrs)
long_df_ep1_48_hrs$count = long_df_ep1_24$count + long_df_ep1_next_24$count
View(long_df_ep1_48_hrs)
View(long_df_ep1_24)
View(long_df_ep1_next_24)
9+12
945+1317
total_mentions_ep1_48_hrs = sum(long_df_ep1_48_hrs$count)
View(long_df_ep2_48_hrs)
View(df_ep2_48)
setwd('/Users/kfranko/Box Sync/GoT_data/data/episode_2')
data_file_ep2_48 = 'kyle_GoT_ep2_search_48_hrs_name_counts2016_05_18-17_28_33.csv'
df_ep2_48 <- read.csv(data_file_ep2_48, header = TRUE)
long_df_ep2_48_hrs = tidyr::gather(df_ep2_48,names,count,nymeria:bran)
total_mentions_ep2_48_hrs = sum(long_df_ep2_48_hrs$count)
View(df_ep2_48)
long_df_ep2_48_hrs = tidyr::gather(df_ep2_48,names,count,nymeria:myrcella)
total_mentions_ep2_48_hrs = sum(long_df_ep2_48_hrs$count)
long_df_ep1_48_hrs$count_percent = (long_df_ep1_48_hrs$count/total_mentions_ep1_48_hrs)*100
long_df_ep2_48_hrs$count_percent = (long_df_ep2_48_hrs$count/total_mentions_ep2_48_hrs)*100
long_df_ep3_48_hrs$count_percent = (long_df_ep3_48_hrs$count/total_mentions_ep3_48_hrs)*100
long_df_ep4_48_hrs$count_percent = (long_df_ep4_48_hrs$count/total_mentions_ep4_48_hrs)*100
View(long_df_ep1_48_hrs)
View(long_df_ep2_48_hrs)
View(long_df_ep3_48_hrs)
View(long_df_ep4_48_hrs)
df_ep1 = subset(long_df_ep1_48_hrs, select=c("names", "count", "count_percent"))
df_ep1$episode = 1
df_ep2 = subset(long_df_ep2_48_hrs, select=c("names", "count", "count_percent"))
df_ep2$episode = 2
df_ep3 = subset(long_df_ep3_48_hrs, select=c("names", "count", "count_percent"))
df_ep3$episode = 3
df_ep4 = subset(long_df_ep4_48_hrs, select=c("names", "count", "count_percent"))
df_ep4$episode = 4
View(df_ep4)
df_ep1_ep2 = dplyr::bind_rows(df_ep1,df_ep2)
View(df_ep1_ep2)
df_ep1_ep2_ep3_ep4 = dplyr::bind_rows(df_ep1,df_ep2,df_ep3,df_ep4)
View(df_ep1_ep2_ep3_ep4)
write.csv(df_ep1_ep2_ep3_ep4, file = "df_eps1_4.csv")
setwd('/Users/kfranko/Desktop/GoT_twitter_project/data_viz/')
fname = 'df_eps1_4.csv'
